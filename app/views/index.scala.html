@import model.Evento
@import model.EventosDia

@(eventosAgora: Seq[Evento],
  eventosHoje: Seq[Evento],
  eventosDia: Seq[EventosDia],
  atualizadoEm: String,
  proxEventoMiliSec: Option[Long],
  jsonld: String)

@displayEvento(evento: Evento, full: Boolean = false, agora: Boolean = false) = {
<div class="testi-item text-center">
  <div class="testi-meta-inner d-flex">
    <div class="testi-img mr-2">
      @if(agora) {
        @if(evento.linkYoutube.isDefined) {
          <a class="icone" href="@evento.linkYoutube.get" target="_blank">
            <i class="fab fa-youtube"></i>
          </a>
        }
        @if(evento.linkInstagram.isDefined){
          <a class="icone" href="@evento.linkInstagram.get" target="_blank">
            <i class="fab fa-instagram"></i>
          </a>
        }
        @if(evento.linkYoutube.isEmpty && evento.linkInstagram.isEmpty) {
          <div class="icone">
            <i class="fas fa-asterisk"></i>
          </div>
        }
      } else {
        <i class="far fa-calendar-alt"></i>
      }

    </div>
    <div class="testi-details">
      <p class="testi-destaque mb-0">
        @evento.nome
        @if(evento.destaque) {
          <i class="fas fa-star"></i>
        }
      </p>      
      @if(evento.info.nonEmpty) {
      <p class="testi-info mb-0">
        @evento.info
      </p>
      }
      <p class="testi-desc mb-0">
        @evento.horarioFmt
      </p>
    </div>
  </div>
</div>
}

@tituloHoje() = {
  @if(eventosAgora.nonEmpty) {
    Em breve
  } else {
    Hoje
  }
}

@base {

  @if(proxEventoMiliSec.isDefined){
    <script type="text/javascript">
      setTimeout(function(){
        location.reload(true);
      },@proxEventoMiliSec.get)
    </script>
  }

  <!-- INICIADAS -->
  @if(eventosAgora.nonEmpty) {
  <section class="section-padding bg-white">
    <div class="container">
      <div class="section-content shadow destaque-box" data-aos="fade-up">
        <div class="heading-section text-center">
          <h2>
            Já começou
          </h2>
        </div>
        <div class="row">
          <div class="testi-content">
            @for(evento <- eventosAgora) {
              @displayEvento(evento, true, true)
            }
            
          </div>
        </div>
      </div>
    </div>
  </section>
  }
  <!-- FIM INICIADA -->

  @if(eventosHoje.nonEmpty) {
  <section class="section-padding bg-fixed bg-white">
    <div class="container">
      <div class="section-content shadow destaque-box" data-aos="fade-up">
        <div class="heading-section text-center">
          <h2>
            @tituloHoje()
          </h2>
        </div>
        <div class="row">
          <div class="testi-content">

            @for(evento <- eventosHoje) {
              @displayEvento(evento, true)
            }

          </div>
        </div>
      </div>
    </div>
  </section>
  }

  <section id="client" class="overlay bg-fixed" style='background-image: url(@routes.Assets.versioned("img/bg.jpg"));'>
    <div class="container">
      <div class="section-content" data-aos="fade-up">
        <div class="row ">
          <div class="col-md-12">
            <div class="title-wrap mb-5">
              <h2>Programação</h2>
            </div>
          </div>
          <!-- Client Holder -->
          <div class="col-md-12 client-holder">
            <div class="client-slider owl-carousel">
              @for(item <- eventosDia){
              <div class="p-3 shadow dia-box">
                <div class="heading-section text-center">
                  <p>@item.diaProgramacaoFmt</p>
                  <h2 class="mb-4">
                    @item.diaFmt
                  </h2>
                </div>
                @for(evento <- item.eventos){
                  @displayEvento(evento, false)
                }
              </div>
              }

            </div>
            <!-- End of Client Holder -->
          </div>
        </div>
      </div>
    </div>
  </section>
}(Some(jsonld))